I"^<h1 id="spring-jdbc">Spring JDBC</h1>

<h2 id="ê°œìš”">ê°œìš”</h2>
<p>Databaseì™€ ì—°ê²°í•˜ëŠ” ë™ì‘ì„ ë„ì™€ì¤€ë‹¤. 
 êµ¬ì²´ì ìœ¼ë¡œ ì–´ë–¤ ë„ì›€ì„ ì£¼ëŠ”ì§€ ì•Œì•„ë³´ì.</p>

<h3 id="data-access">Data Access</h3>
<p>DataBaseì™€ ì—°ê²° ë¶€ë¶„ì„ ë„ì™€ì¤€ë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">spring-jdbcì—ì„œ ë‹¤ë£¨ê³  ìˆë‹¤.</code>
 <code class="language-plaintext highlighter-rouge">spring-txì—ì„œ ë‹¤ë£¨ê³  ìˆë‹¤.</code></p>

<p><code class="language-plaintext highlighter-rouge">ë˜í•œ ì¶”ê°€ë¡œ db ì—°ê²°ì„ ìœ„í•´ mysql-connector-javaê°€ í•„ìš”í•˜ë‹¤.</code>
 <code class="language-plaintext highlighter-rouge">basic data sourceë¥¼ ë‹¤ë£¨ê¸° ìœ„í•´ apache ì œê³µí•˜ëŠ” commons-dbcp2 ì‚¬ìš©í•œë‹¤.</code>
  javax.sql.DataSource ê°ì²´(ì´ ê°ì²´ëŠ” ë‹¤ìŒì— ê³µë¶€í•˜ë„ë¡ í•˜ì.)ì— apacheì—ì„œ ì œê³µí•˜ëŠ” basicDataSourceë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ì €ì¥í•˜ì—¬ ê´€ë¦¬í•œë‹¤.</p>

<p>jdbcTemplate.queryForInt : ì¿¼ë¦¬ë¬¸ì„ ì‘ì„±í•´ì„œ ê²°ê³¼ ë°ì´í„° ìˆ˜ë¥¼ return
 jdbcTemplate.queryForObject : ì¿¼ë¦¬ ê²°ê³¼ë¥¼ ì›í•˜ëŠ” ê°ì²´ë¡œ ë°›ì„ ìˆ˜ ìˆë‹¤.
 ì´ë•Œ new Object[]{1212L}ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ë¥¼ ì˜ ëª¨ë¥´ê² ë‹¤.</p>

<ul>
  <li>NamedparameterJdbcTemplate : jdbcTempateì—ì„œ ì¸ìë¥¼ ?ë¡œ ë°›ëŠ” ëŒ€ì‹  íŒŒë¼ë¯¸í„°ëª…ì„ ì‚¬ìš©í•˜ì—¬ ì‘ì„±í•˜ëŠ” ê²ƒì„ ì§€ì›í•œë‹¤. 
  NamedparameterJdbcTemplate</li>
  <li>
    <p>query Method : query(Sqlë¬¸, ë°”ì¸ë”© í•  Parameterë¥¼ ìœ„í•œ ë¹ˆ ê°ì²´- collection.emptyê°ì²´, dtoì—ì„œ ê°€ì ¸ì˜¨ rowMapper)</p>
  </li>
  <li>RowMapper : Dto í´ë˜ìŠ¤ë¥¼ ê°€ì ¸ì™€ í•´ë‹¹ í•„ë“œë¥¼ parameterë¡œ ë°”ê¿”ì¤€ë‹¤. (BeanpropertyRowMapper =&gt; ì¹´ë©œ í‘œê¸°ë²• &lt;-&gt; ì–¸ë”ìŠ¤ì½”ì–´ í‘œê¸°ë²•) ì¦‰, ë°˜í™˜ì„ Dto ê°ì²´ë¡œ í•˜ê³  ì‹¶ì„ ê²½ìš° í•´ë‹¹ í‹€ì„ RowMapperê°€ ì œê³µí•˜ëŠ” ê²ƒ ê°™ë‹¤.</li>
</ul>

<p>ì™€ ì‹ ê¸°í•˜ë„¤ ê·¸ë ‡ë‹¤ë©´ (NamedparameterJdbcTemplate)query(ì¿¼ë¦¬ë¬¸, ë¹ˆê°ì²´, rowMapper) = Dto ê°ì²´ ì´ë ‡ë‹¨ ì†Œë¦°ë° ìë™ìœ¼ë¡œ ì—°ê²°í•´ì¤€ë‹¨ ì†Œë¦¬ì¸ê±´ê°€?</p>

<ul>
  <li>update Method : ì¿¼ë¦¬ë¬¸ê³¼ ë°”ì¸ë”©í•  parameter ê°ì²´ë¥¼ ë°›ì•„ datebaseê°’ì„ ë³€ê²½í•œë‹¤. (UPDATE, DELETE) ì„±ê³µì‹œ 1, ì‹¤íŒ¨ì‹œ 0 ë°˜í™˜</li>
  <li>UPDATEì‹œ SqlparameterSourceì— BeanPropertSqlParameterSourceì—ì„œ Dtoë¥¼ ë°›ì•„ ê° parameterë¥¼ ì „ë‹¬í•œë‹¤. ì „ë‹¬ëœ parameterë¥¼ Queryë¬¸ì— ë°”ì¸ë”© í•˜ì—¬ ì‹¤í–‰.</li>
  <li>
    <p>DELETEì‹œ Mapì— parameterì™€ ê°’ì„ ê°€ì§„ singletonMap(1ê°œë¥¼ ì§€ìš°ëŠ”ë° ì‚¬ìš©!)ìœ¼ë¡œ parameter ì „ë‹¬í•œë‹¤. ì „ë‹¬ëœ parameterë¥¼ Queryë¬¸ì— ë°”ì¸ë”© í•˜ì—¬ ì‹¤í–‰.</p>
  </li>
  <li>
    <p>queryForObject Method : queryForObject(SQL ë¬¸ , Mapì— parameterì™€ ê°’ì„ ê°€ì§„ singletonMapìœ¼ë¡œ parameter ì „ë‹¬í•œë‹¤. , Dto ê°ì²´ë¡œ ë°˜í™˜í•˜ê¸° ìœ„í•´ RowMapper) ì „ë‹¬ëœ parameterë¥¼ Queryë¬¸ì— ë°”ì¸ë”© í•˜ì—¬ ì‹¤í–‰. ì´ë–„ í•´ë‹¹ parameterì— ê°’ì´ ì—†ì„ ê²½ìš°ë¥¼ ëŒ€ë¹„(Exception)</p>
  </li>
  <li>
    <p>SimpleJdbcInsert : insert ì¿¼ë¦¬ë¥¼ ìƒì„±í•´ì¤€ë‹¤. dataSourceì— ê°ì²´ë¥¼ ìƒì„±í• ë•Œ whtiTableNameì— tableëª…ì„ ë„£ì–´ì£¼ë©´ ìƒì„± ë˜ë©°, ê°ì²´ ì•ˆ executeë¥¼ í†µí•´ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•œë‹¤. usingGeneratedKeyColumns(â€œíŒŒë¼ë¯¸í„°â€)ì„ í†µí•´ ìë™ìœ¼ë¡œ íŒŒë¼ë¯¸í„°ì˜ ê°’ì„ ê°€ì§„ë‹¤.(ë³´í†µ id) ê·¸ë¦¬ê³  excuteAndReturnKeyë¥¼ í†µí•´ ë°˜í™˜í•œë‹¤.</p>
  </li>
  <li>TransactionManagementConfigurer : ë³´í†µ transaction í•˜ê¸° ìœ„í•´ DBConfigì—ì„œ implements ë°›ì•„ ì‚¬ìš©í•œë‹¤.
    <ul>
      <li>annotationDrivenTrasactionManager() : transactionì„ í•˜ê¸° ìœ„í•´ PlatformTransactionManagerì˜ transactionManager()ë¥¼ ì‚¬ìš©í•˜ì—¬ DataSourceTransactionManagerë¥¼ DataSourceë¡œ í• ë‹¹ì‹œí‚¤ë©°, PlatformTransactionManagerì„ ë°˜í™˜í•œë‹¤.</li>
    </ul>
  </li>
</ul>

:ET
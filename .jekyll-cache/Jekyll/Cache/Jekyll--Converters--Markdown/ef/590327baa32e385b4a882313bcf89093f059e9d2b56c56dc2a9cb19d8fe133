I"Ê)<h3 id="job">Job()</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">kotlinx.coroutines.*</span>

<span class="n">fun</span> <span class="nf">main</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">val</span> <span class="n">job</span> <span class="o">=</span> <span class="nc">GlobalScope</span><span class="o">.</span><span class="na">launch</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">delay</span><span class="o">(</span> <span class="mi">1000L</span> <span class="o">)</span>
        <span class="n">println</span><span class="o">(</span><span class="s">"World"</span><span class="o">)</span>
        <span class="n">doSomething</span><span class="o">()</span>
    <span class="o">}</span>
    <span class="n">println</span><span class="o">(</span><span class="s">"Hello"</span><span class="o">)</span>
    <span class="n">println</span><span class="o">(</span><span class="s">"job: $job"</span><span class="o">)</span>
    <span class="nc">THread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span> <span class="mi">2000L</span> <span class="o">)</span>
    <span class="n">println</span><span class="o">(</span><span class="s">"job: $job"</span><span class="o">)</span>
<span class="o">}</span>

<span class="n">suspend</span> <span class="n">fun</span> <span class="nf">doSomething</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">println</span><span class="o">(</span><span class="s">"Do Something"</span><span class="o">)</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>Hello
job: StandaloneCoroutine{Active}@....
World
Do Something
job: StandaloneCoroutine{Completed}@....
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">kotlinx.coroutines.*</span>

<span class="n">fun</span> <span class="nf">main</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">val</span> <span class="n">job</span> <span class="o">=</span> <span class="nc">GlobalScope</span><span class="o">.</span><span class="na">launch</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">delay</span><span class="o">(</span> <span class="mi">1000L</span> <span class="o">)</span>
        <span class="n">println</span><span class="o">(</span><span class="s">"World"</span><span class="o">)</span>
        <span class="n">doSomething</span><span class="o">()</span>
    <span class="o">}</span>
    <span class="n">println</span><span class="o">(</span><span class="s">"Hello"</span><span class="o">)</span>
    <span class="n">println</span><span class="o">(</span><span class="s">"job: ${job.isActive}, ${job.isCompleted}"</span><span class="o">)</span>
    <span class="nc">THread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span> <span class="mi">2000L</span> <span class="o">)</span>
    <span class="n">println</span><span class="o">(</span><span class="s">"job: ${job.isActive}, ${job.isCompleted}"</span><span class="o">)</span>
<span class="o">}</span>

<span class="n">suspend</span> <span class="n">fun</span> <span class="nf">doSomething</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">println</span><span class="o">(</span><span class="s">"Do Something"</span><span class="o">)</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>Hello
job: true, false
World
Do Something
job: false, true
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="job-ê°ì²´">Job ê°ì²´</h3>
<p>Job</p>
<ul>
  <li>ì½”ë£¨í‹´ì˜ ìƒëª…ì£¼ê¸°ë¥¼ ê´€ë¦¬í•˜ë©° ìƒì„±ëœ ì½”ë£¨í‹´ ì‘ì—…ë“¤ì€ ë¶€ëª¨-ìì‹ê³¼ ê°™ì€ ê´€ê³„ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.</li>
</ul>

<p>Job ê·œì¹™</p>
<ul>
  <li>ë¶€ëª¨ê°€ ì·¨ì†Œ(cancel)ë˜ê±°ë‚˜ ì‹¤í–‰ ì‹¤íŒ¨í•˜ë©´ ê·¸ í•˜ìœ„ ìì‹ë“¤ì€ ëª¨ë‘ ì·¨ì†Œëœë‹¤.</li>
  <li>ìì‹ì˜ ì‹¤íŒ¨ëŠ” ê·¸ ë¶€ëª¨ì— ì „ë‹¬ë˜ë©° ë¶€ëª¨ ë˜í•œ ì‹¤íŒ¨í•œë‹¤. (ë‹¤ë¥¸ ëª¨ë“  ìì‹ë„ ì·¨ì†Œë¨)</li>
</ul>

<p>SupervisorJob</p>
<ul>
  <li>ìì‹ì˜ ì‹¤íŒ¨ê°€ ê·¸ ë¶€ëª¨ë‚˜ ë‹¤ë¥¸ ìì‹ì— ì „ë‹¬ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì‹¤í–‰ì„ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.</li>
</ul>

<h4 id="join-ê²°ê³¼-ê¸°ë‹¤ë¦¬ê¸°">Join() ê²°ê³¼ ê¸°ë‹¤ë¦¬ê¸°</h4>
<p>Join()</p>
<ul>
  <li>Job ê°ì²´ì˜ join()ì„ ì‚¬ìš©í•´ ì™„ë£Œë¥¼ ê¸°ë‹¤ë¦´ ìˆ˜ ìˆë‹¤.
    <ul>
      <li>launchì—ì„œ ë°˜í™˜ ê°’ì„ ë°›ìœ¼ë©´ Job ê°ì²´ê°€ ë˜ê¸° ë•Œë¬¸ì— ì´ê²ƒì„ ì´ìš©í•´ main ë©”ì„œë“œì—ì„œ join()ì„ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.</li>
    </ul>
  </li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="o">...</span>
<span class="n">fun</span> <span class="nf">main</span><span class="o">()</span> <span class="o">=</span> <span class="n">runBlocking</span><span class="o">&lt;</span><span class="nc">Unit</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="n">val</span> <span class="n">job</span> <span class="o">=</span> <span class="n">launch</span> <span class="o">{</span> <span class="c1">// Jobì˜ ê°ì²´ë¥¼ ë°˜í™˜</span>
        <span class="n">delay</span><span class="o">(</span><span class="mi">1000L</span><span class="o">)</span>
        <span class="n">println</span><span class="o">(</span><span class="s">"World!"</span><span class="o">)</span>
    <span class="o">}</span>
    <span class="n">println</span><span class="o">(</span><span class="s">"Hello"</span><span class="o">)</span>
    <span class="n">job</span><span class="o">.</span><span class="na">join</span><span class="o">()</span> <span class="c1">// ëª…ì‹œì ìœ¼ë¡œ ì½”ë£¨í‹´ì´ ì™„ë£Œë˜ê¸¸ ê¸°ë‹¤ë¦¼. ì·¨ì†Œí•  ê²½ìš° job.cancel()ì„ ì‚¬ìš©</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">kotlinx.coroutines.*</span>

<span class="n">fun</span> <span class="nf">main</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">runBlocking</span> <span class="o">{</span> <span class="c1">// coroutine Block ìƒì„±!</span>
        <span class="n">val</span> <span class="n">job</span> <span class="o">=</span> <span class="nc">GlobalScope</span><span class="o">.</span><span class="na">launch</span><span class="o">()</span> <span class="o">{</span>
            <span class="n">delay</span><span class="o">(</span> <span class="mi">1000L</span> <span class="o">)</span>
            <span class="n">println</span><span class="o">(</span><span class="s">"World"</span><span class="o">)</span>
            <span class="n">doSomething</span><span class="o">()</span>
        <span class="o">}</span>
        <span class="n">println</span><span class="o">(</span><span class="s">"Hello"</span><span class="o">)</span>
        <span class="n">println</span><span class="o">(</span><span class="s">"job: ${job.isActive}, ${job.isCompleted}"</span><span class="o">)</span>
        <span class="n">job</span><span class="o">.</span><span class="na">join</span><span class="o">()</span> <span class="c1">// launchê°€ ì™„ë£Œë  ë•Œê¹Œì§€ ìƒìœ„ ë£¨í‹´ì€ ë¸”ë¡í‚¹í•œë‹¤.</span>
        <span class="c1">// join()ì´ suspend í•¨ìˆ˜ë¼ì„œ coroutine ì•ˆì—ì„œë§Œ ì‚¬ìš©ê°€ëŠ¥</span>
        <span class="n">println</span><span class="o">(</span><span class="s">"job: ${job.isActive}, ${job.isCompleted}"</span><span class="o">)</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="n">suspend</span> <span class="n">fun</span> <span class="nf">doSomething</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">println</span><span class="o">(</span><span class="s">"Do Something"</span><span class="o">)</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>Hello
job: true, false
World
Do Something
job: false, true
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="jobì˜-ìƒíƒœ">Jobì˜ ìƒíƒœ</h3>
<p>| ìƒíƒœ | isActive | isCompleted | isCancelled |
| â€” | â€” | â€” | â€” |
| New | false | false | false |
| Active(ê¸°ë³¸ê°’ ìƒíƒœ) | true | false | false |
| Completing | true | false | false |
| Cancelling | false | false | true |
| Cancelled(ìµœì¢… ìƒíƒœ) | false | true | true |
| Completed(ìµœì¢… ìƒíƒœ) | false | true | false |</p>

<p><img src="/assets/images/study/kotlin/kotlin_oop_job_status.JPG" alt="Job-Status" /></p>

<h3 id="ì½”ë£¨í‹´ì˜-ì¤‘ë‹¨ê³¼-ì·¨ì†Œ">ì½”ë£¨í‹´ì˜ ì¤‘ë‹¨ê³¼ ì·¨ì†Œ</h3>

<p>ì¤‘ë‹¨ (ì½”ë£¨í‹´ ì½”ë“œ ë‚´ì—ì„œ)</p>
<ul>
  <li>delay(ì‹œê°„ê°’) - ì¼ì • ì‹œê°„ì„ ì§€ì—°í•˜ë©° ì¤‘ë‹¨</li>
  <li>yield() - íŠ¹ì • ê°’ì„ ì‚°ì¶œí•˜ê¸° ìœ„í•´ ì¤‘ë‹¨</li>
</ul>

<p>ì·¨ì†Œ (ì½”ë£¨í‹´ ì™¸ë¶€ì—ì„œ)</p>
<ul>
  <li>Job.cancel() - ì§€ì •ëœ ì½”ë£¨í‹´ ì‘ì—…ì„ ì¦‰ì‹œ ì·¨ì†Œ</li>
  <li>Job.cancelAndJoin() - ì§€ì •ëœ ì½”ë£¨í‹´ ì‘ì—…ì„ ì·¨ì†Œ (ì™„ë£Œì‹œê¹Œì§€ ê¸°ë‹¤ë¦¼)</li>
  <li>ê¸°ë³¸ì ìœ¼ë¡œ ë¶€ëª¨ ìì‹ ê´€ê³„ì— ì ìš©ë  ìˆ˜ ìˆìœ¼ë©° ë¶€ëª¨ ë¸”ë¡ì´ ì·¨ì†Œë˜ë©´ ëª¨ë“  ìì‹ ì½”ë£¨í‹´ì´ ì·¨ì†Œëœë‹¤.</li>
</ul>
:ET